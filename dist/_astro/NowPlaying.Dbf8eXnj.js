import{e as V,c as S,r as Y,d as w,p as Z,a as I,b as T,h,f as z,m as J,s as Q,i as W,g as B,j as O,k as M,H as $,l as q,n as G,o as g,q as X,t as k,u as P,v as L,w as ee,B as se,x as te,y as ae,z as re,U as ie,E as ne,A as oe,N as fe,C as ce,D as le,F as he,G as ue,I as R,J as U,K as de,L as pe,M as d,O as _e,P as ve,Q as C,R as D,S as N,T as ge,V as me,W as ye,X as be,Y as E,Z as x,_ as we,$ as ke}from"./render.QTd294c-.js";/* empty css                       *//* empty css                       */const Ne="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ne);V();class K{anchor;#s=new Map;#t=new Map;#e=new Map;#a=new Set;#r=!0;constructor(s,e=!0){this.anchor=s,this.#r=e}#i=()=>{var s=S;if(this.#s.has(s)){var e=this.#s.get(s),a=this.#t.get(e);if(a)Y(a),this.#a.delete(e);else{var i=this.#e.get(e);i&&(this.#t.set(e,i.effect),this.#e.delete(e),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),a=i.effect)}for(const[r,t]of this.#s){if(this.#s.delete(r),r===s)break;const o=this.#e.get(t);o&&(w(o.effect),this.#e.delete(t))}for(const[r,t]of this.#t){if(r===e||this.#a.has(r))continue;const o=()=>{if(Array.from(this.#s.values()).includes(r)){var c=document.createDocumentFragment();J(t,c),c.append(I()),this.#e.set(r,{effect:t,fragment:c})}else w(t);this.#a.delete(r),this.#t.delete(r)};this.#r||!a?(this.#a.add(r),Z(t,o,!1)):o()}}};#n=s=>{this.#s.delete(s);const e=Array.from(this.#s.values());for(const[a,i]of this.#e)e.includes(a)||(w(i.effect),this.#e.delete(a))};ensure(s,e){var a=S,i=Q();if(e&&!this.#t.has(s)&&!this.#e.has(s))if(i){var r=document.createDocumentFragment(),t=I();r.append(t),this.#e.set(s,{effect:T(()=>e(t)),fragment:r})}else this.#t.set(s,T(()=>e(this.anchor)));if(this.#s.set(a,s),i){for(const[o,f]of this.#t)o===s?a.skipped_effects.delete(f):a.skipped_effects.add(f);for(const[o,f]of this.#e)o===s?a.skipped_effects.delete(f.effect):a.skipped_effects.add(f.effect);a.oncommit(this.#i),a.ondiscard(this.#n)}else h&&(this.anchor=z),this.#i()}}const F=0,A=1;function Ee(n,s,e,a,i){h&&O();var r=W(),t=ie,o=r?P(t):L(t,!1,!1),f=r?P(t):L(t,!1,!1),c=new K(n);B(()=>{var l=s(),u=!1;let p=h&&M(l)===(n.data===$);if(p&&(q(G()),g(!1)),M(l)){var m=ee(),y=!1;const _=v=>{if(!u){y=!0,m(!1),se.ensure(),h&&g(!1);try{v()}finally{te(),ae||re()}}};l.then(v=>{_(()=>{k(o,v),c.ensure(A,a&&(b=>a(b,o)))})},v=>{_(()=>{if(k(f,v),c.ensure(A,i&&(b=>i(b,f))),!i)throw f.v})}),h?c.ensure(F,e):X(()=>{y||_(()=>{c.ensure(F,e)})})}else k(o,l),c.ensure(A,a&&(_=>a(_,o)));return p&&g(!0),()=>{u=!0}})}function xe(n,s,e=!1){h&&O();var a=new K(n),i=e?ne:0;function r(t,o){if(h){const c=oe(n)===$;if(t===c){var f=G();q(f),a.anchor=f,g(!1),a.ensure(t,o),g(!0);return}}a.ensure(t,o)}B(()=>{var t=!1;s((o,f=!0)=>{t=!0,r(f,o)}),t||r(!1,null)},i)}const Ae=Symbol("is custom element"),Se=Symbol("is html");function Ie(n,s,e,a){var i=Te(n);h&&(i[s]=n.getAttribute(s),n.nodeName==="LINK")||i[s]!==(i[s]=e)&&(e==null?n.removeAttribute(s):typeof e!="string"&&Me(n).includes(s)?n[s]=e:n.setAttribute(s,e))}function Te(n){return n.__attributes??={[Ae]:n.nodeName.includes("-"),[Se]:n.namespaceURI===fe}}var H=new Map;function Me(n){var s=n.getAttribute("is")||n.nodeName,e=H.get(s);if(e)return e;H.set(s,e=[]);for(var a,i=n,r=Element.prototype;r!==i;){a=le(i);for(var t in a)a[t].set&&e.push(t);i=ce(i)}return e}function Pe(n=!1){const s=he,e=s.l.u;if(!e)return;let a=()=>_e(s.s);if(n){let i=0,r={};const t=ve(()=>{let o=!1;const f=s.s;for(const c in f)f[c]!==r[c]&&(r[c]=f[c],o=!0);return o&&i++,i});a=()=>d(t)}e.b.length&&ue(()=>{j(s,a),U(e.b)}),R(()=>{const i=de(()=>e.m.map(pe));return()=>{for(const r of i)typeof r=="function"&&r()}}),e.a.length&&R(()=>{j(s,a),U(e.a)})}function j(n,s){if(n.l.s)for(const e of n.l.s)d(e);s()}var Le=ye('<a class="now-playing font-handwriting text-4xl text-center flex justify-center text-amber-900"><p>Now playing on spotify:</p> <span class="pl-4"><p class="text-amber-800"> </p></span></a>');function De(n,s){me(s,!1);let e=(async()=>{try{const r=await fetch("/api/spotify.json");if(!r.ok)throw new Error("Fetch failed");const t=await r.json();return{isPlaying:t.isPlaying,songUrl:t.songUrl,title:t.title,artist:t.artist}}catch{return{isPlaying:!1}}})();Pe();var a=C(),i=D(a);Ee(i,()=>e,null,(r,t)=>{var o=C(),f=D(o);{var c=l=>{var u=Le(),p=be(E(u),2),m=E(p),y=E(m);x(m),x(p),x(u),we(()=>{Ie(u,"href",d(t).songUrl),ke(y,`${d(t).title??""} - ${d(t).artist??""}`)}),N(l,u)};xe(f,l=>{d(t).isPlaying&&l(c)})}N(r,o)}),N(n,a),ge()}export{De as default};
